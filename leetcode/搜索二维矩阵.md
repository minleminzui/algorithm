```cpp
class Solution {
public:
    bool searchMatrix(vector<vector<int>>& matrix, int target) {
        // 二分 O(lognm) O(1)
        int row, m, l = 0, r = matrix.size() - 1;
        while(l < r) {
            m = (l + r + 1) >> 1;
            if(matrix[m][0] >  target) r = m - 1;
            else l = m;
        } 

        if(matrix[l][0] == target) return true;
        row = l;
        l = 0, r = matrix[row].size() - 1;

        while(l < r) {
            m = (l + r) >> 1;
            if(matrix[row][m] < target) l = m + 1;
            else r = m;
        }

        if(matrix[row][l] == target) return true;
        else return false;

        // 拼接二分 O(lognm) O(1)
        // int m = matrix.size(), n = matrix[0].size();
        // int low = 0, high = m * n - 1;
        // while (low <= high) {
        //     int mid = (high - low) / 2 + low;
        //     int x = matrix[mid / n][mid % n];
        //     if (x < target) {
        //         low = mid + 1;
        //     } else if (x > target) {
        //         high = mid - 1;
        //     } else {
        //         return true;
        //     }
        // }
        // return false;
    }
};
```

